<section class="lists">
  <div class="lists-header p-4 m-4 rounded-4 text-center" style="margin-top: 1rem;">
    <div class="col-12">
      <h1 class="text-center mb-4">Public Watch Lists</h1>
    </div>

    <% if user_signed_in? %>
    <div class="d-flex justify-content-center gap-3">
      <%= link_to "➕ New List", new_list_path, class: "btn btn-primary" %>
      <%= link_to "📋 My Lists", my_lists_path, class: "btn btn-secondary" %>
    </div>
    <% end %>
  </div>

  <% if @lists.any? %>
    <div class="list-grid">
      <% @lists.each do |list| %>
        <article class="list-card shadow-lg border-0 p-4 m-4 rounded-4">
          <h2><%= link_to list.name, list_path(list) %></h2>

          <% if list.description.present? %>
            <p class="fst-italic"><%= truncate(list.description, length: 140) %></p>
          <% end %>

          <p>
            <span><%= pluralize(list.bookmarks.size, "movie") %></span>
          </p>

          <% if user_signed_in? && list.user_id == current_user.id %>
            <%= link_to "Edit", edit_list_path(list), class: "btn btn-secondary" %>
            <%= link_to "🗑 Delete this list", list_path(list),
              data: { turbo_method: :delete, turbo_confirm: "Are you sure?" },
              class: "btn btn-danger" %>

          <% end %>
        </article>
      <% end %>
    </div>
  <% else %>
    <p>There are no public lists yet.</p>
  <% end %>
</section>
